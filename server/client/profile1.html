Loggedd innn!
<div id="friend-conteinter"></div>
<form action="user/friend" method="post">
  <input type="text" name="friendId" id="" placeholder="Id del tuo amico" />
  <input type="submit" value="Aggiungi" />
</form>
<script src="socket.io/socket.io.js"></script>
<script type="text/javascript">
  var socket = io("http://192.168.1.114:4000");

  socket.on("welcome", function (msg) {
    document.getElementById("response").innerHTML = msg + "<br/>";
  });

  socket.on("newFriend", function (msg) {
    document.getElementById("newFriend").innerHTML = msg + "<br/>";
  });

  const root = document.getElementById("friend-conteinter");
  const aggiungiAmico = function (e) {
    fetch("/user/accept", {
      method: "POST", // *GET, POST, PUT, DELETE, etc.
      credentials: "include", // include, *same-origin, omit
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
        friendId: e.target.parentElement.id,
      }),
    }).then((response) => {
      console.log(response);
      getFriend();
    });
  };
  const buildFriendList = function (data, rootEl) {
    data.forEach((element) => {
      let div = document.createElement("div");
      div.id = element.id;
      let accettaBtn;
      if (element.pending) {
        accettaBtn = document.createElement("button");
        accettaBtn.addEventListener("click", aggiungiAmico);
        accettaBtn.innerText = "Accetta " + element.firstName;
      }
      div.innerHTML = `
            <h4>${element.firstName} ${element.lastName}</h4>
             <p>${element.email}</p>`;
      rootEl.appendChild(div);
      div.appendChild(accettaBtn);
    });
  };
  const getFriend = function () {
    fetch("user/friend", {
      method: "GET",
      credentials: "include",
    })
      .then((response) => response.json())
      .then((json) => {
        console.log(json);
        buildFriendList(json, root);
      })
      .catch((err) => {
        console.log(err);
      });
  };
  getFriend();
</script>
<br />
<h2>Notifiche:</h2>
<hr />
<label for="response">Risposta del server:</label>
<br />
<div id="response"></div>
<hr />
<label for="newFriend">Notifiche di newFriend:</label>
<br />
<div id="newFriend"></div>
<hr />
<label for="newComment">Notifiche di newComment:</label>
<br />
<div id="newComment"></div>
<hr />
<label for="newInvitation">Notifiche di newInvitation:</label>
<br />
<div id="newInvitation"></div>
